{
	"info": {
		"_postman_id": "545e29c8-082c-4b3c-9a3d-7aaf837c0789",
		"name": "Transfer Aggregator Service",
		"description": "Complete test collection for the Airport Transfer Aggregator API. Covers Search, Book, and Cancel flows with various scenarios.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "31949509"
	},
	"item": [
		{
			"name": "1. Search API",
			"item": [
				{
					"name": "S-001 Valid Address Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Has offers', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.offers).to.be.an('array');",
									"    pm.expect(json.offers.length).to.be.greaterThan(0);",
									"});",
									"",
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									"",
									"// Save first offerId for booking tests",
									"var json = pm.response.json();",
									"if (json.offers && json.offers.length > 0) {",
									"    pm.collectionVariables.set('offerId', json.offers[0].offerId);",
									"    console.log('Saved offerId: ' + json.offers[0].offerId);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Request-Id",
								"value": "{{$guid}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"433 Park Avenue, New York, NY 10022\"\n  },\n  \"dropoffLocation\": {\n    \"address\": \"JFK Airport, Queens, NY 11430\"\n  },\n  \"pickupDateTime\": \"2026-08-16T15:30:00\",\n  \"numPassengers\": 2,\n  \"numBags\": 2,\n  \"currency\": \"USD\",\n  \"mode\": \"ONE_WAY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "Polling Search",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-Id",
								"value": "4c2d1617-9207-4eae-ab0f-2ee35eb92dba"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search/{{searchId}}/poll",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search",
								"{{searchId}}",
								"poll"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-002 IATA Airport Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Has offers', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.offers).to.be.an('array');",
									"});",
									"",
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Request-Id",
								"value": "{{$guid}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"Times Square, NYC\"\n  },\n  \"dropoffLocation\": {\n    \"iataCode\": \"JFK\"\n  },\n  \"pickupDateTime\": \"2026-08-20T10:00:00\",\n  \"numPassengers\": 3,\n  \"numBags\": 4,\n  \"currency\": \"USD\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-003 Coordinates Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"latitude\": 40.7580,\n    \"longitude\": -73.9855\n  },\n  \"dropoffLocation\": {\n    \"latitude\": 40.6413,\n    \"longitude\": -73.7781\n  },\n  \"pickupDateTime\": \"2026-09-01T14:00:00\",\n  \"numPassengers\": 1,\n  \"numBags\": 1,\n  \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-005 Round Trip Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"iataCode\": \"LAX\"\n  },\n  \"dropoffLocation\": {\n    \"address\": \"Beverly Hills, CA 90210\"\n  },\n  \"pickupDateTime\": \"2026-10-15T09:00:00\",\n  \"numPassengers\": 4,\n  \"numBags\": 6,\n  \"currency\": \"USD\",\n  \"mode\": \"ROUND_TRIP\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-006 Large Group (8 passengers)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"iataCode\": \"ORD\"\n  },\n  \"dropoffLocation\": {\n    \"address\": \"Downtown Chicago, IL\"\n  },\n  \"pickupDateTime\": \"2026-11-20T18:00:00\",\n  \"numPassengers\": 8,\n  \"numBags\": 10,\n  \"currency\": \"USD\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-007 Without pickupDateTime (Optional)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200 (pickupDateTime optional)', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"Manhattan, NY\"\n  },\n  \"dropoffLocation\": {\n    \"iataCode\": \"LGA\"\n  },\n  \"numPassengers\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-101 Missing Pickup Location (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error code is VALIDATION_ERROR', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.code).to.eql('VALIDATION_ERROR');",
									"});",
									"",
									"pm.test('Has searchId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.searchId).to.be.a('string');",
									"    pm.collectionVariables.set('searchId', json.searchId);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"dropoffLocation\": {\n    \"iataCode\": \"JFK\"\n  },\n  \"pickupDateTime\": \"2026-08-16T15:30:00\",\n  \"numPassengers\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-102 Missing Dropoff Location (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"123 Main St\"\n  },\n  \"pickupDateTime\": \"2026-08-16T15:30:00\",\n  \"numPassengers\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-104 Zero Passengers (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"123 Main St\"\n  },\n  \"dropoffLocation\": {\n    \"iataCode\": \"JFK\"\n  },\n  \"pickupDateTime\": \"2026-08-16T15:30:00\",\n  \"numPassengers\": 0\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "S-106 Address Too Long (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"\n  },\n  \"dropoffLocation\": {\n    \"iataCode\": \"JFK\"\n  },\n  \"pickupDateTime\": \"2026-08-16T15:30:00\",\n  \"numPassengers\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "2. Book API",
			"item": [
				{
					"name": "B-001 Valid Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Status is CONFIRMED or PENDING', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(['CONFIRMED', 'PENDING']).to.include(json.status);",
									"});",
									"",
									"pm.test('Has bookingId', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.bookingId).to.be.a('string');",
									"});",
									"",
									"// Save bookingId for cancel tests",
									"var json = pm.response.json();",
									"if (json.bookingId) {",
									"    pm.collectionVariables.set('bookingId', json.bookingId);",
									"    console.log('Saved bookingId: ' + json.bookingId);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generate unique idempotency key",
									"pm.collectionVariables.set('idempotencyKey', 'book-' + Date.now());"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Request-Id",
								"value": "{{$guid}}"
							},
							{
								"key": "Idempotency-Key",
								"value": "{{idempotencyKey}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{offerId}}\",\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  },\n  \"flight\": {\n    \"airline\": \"AA\",\n    \"flightNumber\": \"123\"\n  },\n  \"specialInstructions\": \"Please wait at arrivals exit 3\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-005 Idempotent Booking (Same Key)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200 (cached response)', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Same bookingId returned', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.bookingId).to.eql(pm.collectionVariables.get('bookingId'));",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Idempotency-Key",
								"value": "{{idempotencyKey}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{offerId}}\",\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-003 Booking with Extra Passengers",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set('idempotencyKey2', 'book-extra-' + Date.now());"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Idempotency-Key",
								"value": "{{idempotencyKey2}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{offerId}}\",\n  \"passenger\": {\n    \"firstName\": \"Alice\",\n    \"lastName\": \"Smith\",\n    \"email\": \"alice@example.com\",\n    \"phoneNumber\": \"+18005559999\",\n    \"countryCode\": \"US\"\n  },\n  \"extraPassengers\": [\n    {\"firstName\": \"Bob\", \"lastName\": \"Smith\"},\n    {\"firstName\": \"Charlie\", \"lastName\": \"Smith\"}\n  ],\n  \"flight\": {\n    \"airline\": \"UA\",\n    \"flightNumber\": \"456\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-101 Invalid OfferId Format (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error code is INVALID_TOKEN', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.code).to.eql('INVALID_TOKEN');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"not-a-valid-token\",\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-102 Tampered Signature (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error code is INVALID_TOKEN', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.code).to.eql('INVALID_TOKEN');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"eyJzdXAiOiJNT1pJTyIsInNpZCI6ImFiYyIsInJpZCI6Inh5eiIsImV4cCI6OTk5OTk5OTk5OSwiaWF0IjoxNzM2NTE5MDAwfQ.TAMPERED_SIG\",\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-201 Missing OfferId (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-202 Missing Passenger FirstName (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{offerId}}\",\n  \"passenger\": {\n    \"lastName\": \"Doe\",\n    \"email\": \"john@example.com\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "B-205 Invalid Email (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{offerId}}\",\n  \"passenger\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"not-an-email\",\n    \"phoneNumber\": \"+18005551234\",\n    \"countryCode\": \"US\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "3. Cancel API",
			"item": [
				{
					"name": "C-001 Valid Cancel",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Status is CANCELLED', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.status).to.eql('CANCELLED');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Request-Id",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/bookings/{{bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"bookings",
								"{{bookingId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "C-004 Idempotent Cancel (Already Cancelled)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200 (idempotent)', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Status is CANCELLED', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.status).to.eql('CANCELLED');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/bookings/{{bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"bookings",
								"{{bookingId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "C-101 Invalid BookingId Format (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error code is INVALID_TOKEN', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.code).to.eql('INVALID_TOKEN');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/bookings/not-a-valid-booking-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"bookings",
								"not-a-valid-booking-id"
							]
						}
					},
					"response": []
				},
				{
					"name": "C-102 Tampered BookingId Signature (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/bookings/eyJzdXAiOiJNT1pJTyIsInJpZCI6InJlczEyMyIsImNuZiI6Ik1aMTIzNDU2In0.TAMPERED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"bookings",
								"eyJzdXAiOiJNT1pJTyIsInJpZCI6InJlczEyMyIsImNuZiI6Ik1aMTIzNDU2In0.TAMPERED"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "4. Health & Info",
			"item": [
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Status is UP', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.status).to.eql('UP');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/actuator/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Prometheus Metrics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/actuator/prometheus",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"actuator",
								"prometheus"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "5. E2E Flow",
			"item": [
				{
					"name": "E2E Step 1: Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Search successful', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var json = pm.response.json();",
									"if (json.offers && json.offers.length > 0) {",
									"    pm.collectionVariables.set('e2e_offerId', json.offers[0].offerId);",
									"    pm.collectionVariables.set('e2e_searchId', json.searchId);",
									"    console.log('E2E offerId: ' + json.offers[0].offerId);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Request-Id",
								"value": "e2e-search-{{$guid}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pickupLocation\": {\n    \"address\": \"Empire State Building, NYC\"\n  },\n  \"dropoffLocation\": {\n    \"iataCode\": \"JFK\"\n  },\n  \"pickupDateTime\": \"2026-12-25T10:00:00\",\n  \"numPassengers\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/search",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"search"
							]
						}
					},
					"response": []
				},
				{
					"name": "E2E Step 2: Book",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Booking successful', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var json = pm.response.json();",
									"pm.collectionVariables.set('e2e_bookingId', json.bookingId);",
									"console.log('E2E bookingId: ' + json.bookingId);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set('e2e_idempotencyKey', 'e2e-book-' + Date.now());"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Idempotency-Key",
								"value": "{{e2e_idempotencyKey}}"
							},
							{
								"key": "X-Request-Id",
								"value": "e2e-book-{{$guid}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"offerId\": \"{{e2e_offerId}}\",\n  \"passenger\": {\n    \"firstName\": \"E2E\",\n    \"lastName\": \"Test\",\n    \"email\": \"e2e.test@example.com\",\n    \"phoneNumber\": \"+18001234567\",\n    \"countryCode\": \"US\"\n  },\n  \"flight\": {\n    \"airline\": \"DL\",\n    \"flightNumber\": \"999\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/book",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "E2E Step 3: Cancel",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Cancel successful', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Status is CANCELLED', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.status).to.eql('CANCELLED');",
									"});",
									"",
									"console.log('E2E Flow Complete!');"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Request-Id",
								"value": "e2e-cancel-{{$guid}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/transfers/bookings/{{e2e_bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"transfers",
								"bookings",
								"{{e2e_bookingId}}"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080"
		},
		{
			"key": "offerId",
			"value": ""
		},
		{
			"key": "bookingId",
			"value": ""
		},
		{
			"key": "searchId",
			"value": ""
		},
		{
			"key": "e2e_offerId",
			"value": ""
		},
		{
			"key": "e2e_searchId",
			"value": ""
		},
		{
			"key": "e2e_idempotencyKey",
			"value": ""
		},
		{
			"key": "e2e_bookingId",
			"value": ""
		},
		{
			"key": "idempotencyKey",
			"value": ""
		}
	]
}